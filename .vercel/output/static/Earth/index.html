<!DOCTYPE html><html lang="en" data-astro-cid-sckkx6r4> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.9.4"><title>Astro Basics</title><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Audiowide&display=swap" rel="stylesheet"><link rel="stylesheet" href="/_astro/Earth.C_AqOXWL.css">
<style>body{margin:0;padding:0;overflow:hidden;background:#000;font-family:Arial,sans-serif}#info[data-astro-cid-fpuvirey]{position:absolute;top:10px;left:10px;color:#fff;z-index:100;font-size:14px;line-height:1.4}#info[data-astro-cid-fpuvirey] a[data-astro-cid-fpuvirey]{color:#4db2ff;text-decoration:none}#info[data-astro-cid-fpuvirey] a[data-astro-cid-fpuvirey]:hover{text-decoration:underline}
</style></head> <body class="bg-black " data-astro-cid-sckkx6r4> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div> <div class="shooting-star" data-astro-cid-sckkx6r4></div>  <div class=""> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Z15qYjm" prefix="r1" component-url="/_astro/HeaderComp.B2btEWqC.js" component-export="default" renderer-url="/_astro/client.MSA0aJL8.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;HeaderComp&quot;,&quot;value&quot;:true}" await-children><link rel="preload" as="image" href="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/NASA_logo.svg/2449px-NASA_logo.svg.png"/><header class="text-white p-2 sm:p-4 fixed w-full z-[9999]"><div class="flex items-center justify-between p-2 sm:p-4 m-1 sm:m-2 rounded-2xl sm:rounded-4xl bg-gray-800/50 backdrop-blur-md shadow-lg"><a href="/" class="flex items-center justify-start flex-shrink-0"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/NASA_logo.svg/2449px-NASA_logo.svg.png" class="w-16  " alt="NASA Logo"/><h1 class="LandingPageFont text-lg sm:text-xl md:text-2xl ml-2 sm:ml-3 whitespace-nowrap">NASA Missions</h1></a><nav class="hidden lg:flex items-center justify-end gap-4 xl:gap-6"><a href="/MarsExperience" class="relative text-white/90 hover:text-white transition-colors duration-300 text-base xl:text-lg after:content-[&#x27;&#x27;] after:absolute after:-bottom-1 after:left-0 after:h-[3px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full whitespace-nowrap">Mars Experience</a><a href="/PhotoOfTheDay" class="relative text-white/90 hover:text-white transition-colors duration-300 text-base xl:text-lg after:content-[&#x27;&#x27;] after:absolute after:-bottom-1 after:left-0 after:h-[3px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full whitespace-nowrap">Photo of the Day</a><a href="/Earth" class="relative text-white/90 hover:text-white transition-colors duration-300 text-base xl:text-lg after:content-[&#x27;&#x27;] after:absolute after:-bottom-1 after:left-0 after:h-[3px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full whitespace-nowrap">3D Earth</a><a href="/NasaImagesExperience" class="relative text-white/90 hover:text-white transition-colors duration-300 text-base xl:text-lg after:content-[&#x27;&#x27;] after:absolute after:-bottom-1 after:left-0 after:h-[3px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full whitespace-nowrap">NASA Images Experience</a></nav><button class="lg:hidden p-2 text-white/90 hover:text-white transition-colors duration-300" aria-label="Toggle menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu" aria-hidden="true"><path d="M4 12h16"></path><path d="M4 18h16"></path><path d="M4 6h16"></path></svg></button></div></header><!--astro:end--></astro-island> </div>  </body></html> <title>three.js webgpu - earth</title> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">  <script type="importmap">
	{
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.169.0/build/three.webgpu.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.169.0/examples/jsm/"
        }
    }
</script> <script type="module">
	import * as THREE from 'three';
	import { step, normalWorld, output, texture, vec3, vec4, normalize, positionWorld, bumpMap, cameraPosition, color, uniform, mix, uv, max } from 'three';
	import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
	import { GUI } from 'three/addons/libs/lil-gui.module.min.js';

	let camera, scene, renderer, controls, globe, clock;

	init();

	function init() {
		clock = new THREE.Clock();

		camera = new THREE.PerspectiveCamera(25, window.innerWidth / window.innerHeight, 0.1, 100);
		camera.position.set(4.5, 2, 3);

		scene = new THREE.Scene();

		// sun
		const sun = new THREE.DirectionalLight('#ffffff', 2);
		sun.position.set(0, 0, 3);
		scene.add(sun);

		// uniforms
		const atmosphereDayColor = uniform(color('#4db2ff'));
		const atmosphereTwilightColor = uniform(color('#bc490b'));
		const roughnessLow = uniform(0.25);
		const roughnessHigh = uniform(0.35);

		// You'll need to add your texture files to public/textures/planets/
		const textureLoader = new THREE.TextureLoader();

		const dayTexture = textureLoader.load('/textures/planets/earth_day_4096.jpg');
		dayTexture.colorSpace = THREE.SRGBColorSpace;
		dayTexture.anisotropy = 8;

		const nightTexture = textureLoader.load('/textures/planets/earth_night_4096.jpg');
		nightTexture.colorSpace = THREE.SRGBColorSpace;
		nightTexture.anisotropy = 8;

		const bumpRoughnessCloudsTexture = textureLoader.load('/textures/planets/earth_bump_roughness_clouds_4096.jpg');
		bumpRoughnessCloudsTexture.anisotropy = 8;

		// fresnel
		const viewDirection = positionWorld.sub(cameraPosition).normalize();
		const fresnel = viewDirection.dot(normalWorld).abs().oneMinus().toVar();

		// sun orientation
		const sunOrientation = normalWorld.dot(normalize(sun.position)).toVar();

		// atmosphere color
		const atmosphereColor = mix(atmosphereTwilightColor, atmosphereDayColor, sunOrientation.smoothstep(-0.25, 0.75));

		// globe
		const globeMaterial = new THREE.MeshStandardNodeMaterial();

		const cloudsStrength = texture(bumpRoughnessCloudsTexture, uv()).b.smoothstep(0.2, 1);
		globeMaterial.colorNode = mix(texture(dayTexture), vec3(1), cloudsStrength.mul(2));

		const roughness = max(
			texture(bumpRoughnessCloudsTexture).g,
			step(0.01, cloudsStrength)
		);
		globeMaterial.roughnessNode = roughness.remap(0, 1, roughnessLow, roughnessHigh);

		const night = texture(nightTexture);
		const dayStrength = sunOrientation.smoothstep(-0.25, 0.5);

		const atmosphereDayStrength = sunOrientation.smoothstep(-0.5, 1);
		const atmosphereMix = atmosphereDayStrength.mul(fresnel.pow(2)).clamp(0, 1);

		let finalOutput = mix(night.rgb, output.rgb, dayStrength);
		finalOutput = mix(finalOutput, atmosphereColor, atmosphereMix);

		globeMaterial.outputNode = vec4(finalOutput, output.a);

		const bumpElevation = max(
			texture(bumpRoughnessCloudsTexture).r,
			cloudsStrength
		);
		globeMaterial.normalNode = bumpMap(bumpElevation);

		const sphereGeometry = new THREE.SphereGeometry(1, 64, 64);
		globe = new THREE.Mesh(sphereGeometry, globeMaterial);
		scene.add(globe);

		// atmosphere
		const atmosphereMaterial = new THREE.MeshBasicNodeMaterial({ side: THREE.BackSide, transparent: true });
		let alpha = fresnel.remap(0.73, 1, 1, 0).pow(3);
		alpha = alpha.mul(sunOrientation.smoothstep(-0.5, 1));
		atmosphereMaterial.outputNode = vec4(atmosphereColor, alpha);

		const atmosphere = new THREE.Mesh(sphereGeometry, atmosphereMaterial);
		atmosphere.scale.setScalar(1.04);
		scene.add(atmosphere);

		// debug


		// renderer
		renderer = new THREE.WebGPURenderer();
		renderer.setPixelRatio(window.devicePixelRatio);
		renderer.setSize(window.innerWidth, window.innerHeight);
		renderer.setAnimationLoop(animate);
		document.body.appendChild(renderer.domElement);

		// controls
		controls = new OrbitControls(camera, renderer.domElement);
		controls.enableDamping = true;
		controls.minDistance = 0.1;
		controls.maxDistance = 50;

		window.addEventListener('resize', onWindowResize);
	}

	function onWindowResize() {
		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();
		renderer.setSize(window.innerWidth, window.innerHeight);
	}

	async function animate() {
		const delta = clock.getDelta();
		globe.rotation.y += delta * 0.025;

		controls.update();

		renderer.render(scene, camera);
	}
</script> 